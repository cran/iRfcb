<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Prepare IFCB Images for EcoTaxa</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Prepare IFCB Images for EcoTaxa</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This vignette demonstrates how to prepare Imaging FlowCytobot (IFCB)
data for <a href="https://ecotaxa.obs-vlfr.fr/">EcoTaxa</a> in R using
the <code>iRfcb</code> package. This tutorial covers the export of both
unclassified raw IFCB images and annotated Regions of Interest (ROIs)
using the MATLAB code from the <a href="https://github.com/hsosik/ifcb-analysis">ifcb-analysis</a>
repository (Sosik and Olson, 2007). However, the code can be adapted to
process images from other software platforms. The code can also be
adapted to submit automatically classified images using the <a href="../reference/ifcb_extract_classified_images.html"><code>ifcb_extract_classified_images</code></a>
function.</p>
<p>EcoTaxa is a web application widely used for hosting, classifying,
and exporting images of individual objects, particularly in plankton
imaging. It leverages machine learning to assign names based on a
universal taxonomy and produces ecological data in standardized formats
for scientific applications. To submit images, accompanying metadata is
required, which can be generated using the <code>iRfcb</code>
package.</p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting Started</h2>
<div id="installation" class="section level3">
<h3>Installation</h3>
<p>You can install the package from GitHub using the
<code>remotes</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># install.packages(&quot;remotes&quot;)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;EuropeanIFCBGroup/iRfcb&quot;</span>)</span></code></pre></div>
<p>Load the required libraries:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(iRfcb)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># For data wrangling</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">library</span>(readr) <span class="co"># For creating .tsv files</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># For handling dates</span></span></code></pre></div>
</div>
<div id="download-sample-data" class="section level3">
<h3>Download Sample Data</h3>
<p>To get started, download sample data from the <a href="https://doi.org/10.17044/scilifelab.25883455.v3">SMHI IFCB
Plankton Image Reference Library</a> (Torstensson et al.Â 2024) with the
following function:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Define data directory</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>data_dir <span class="ot">&lt;-</span> <span class="st">&quot;data&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Download and extract test data in the data folder</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">ifcb_download_test_data</span>(<span class="at">dest_dir =</span> data_dir,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>                        <span class="at">max_retries =</span> <span class="dv">10</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                        <span class="at">sleep_time =</span> <span class="dv">30</span>,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>                        <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
<div id="unclassified-images" class="section level2">
<h2>Unclassified Images</h2>
<p>This example demonstrates how to prepare a single IFCB sample for
submission to EcoTaxa as a zip-archive.</p>
<div id="extract-images" class="section level3">
<h3>Extract Images</h3>
<p>Extract all ROIs from a sample as <code>.png</code> images:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Define path to sample that you wish to prepare for a EcoTaxa submission</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>sample_path <span class="ot">&lt;-</span> <span class="st">&quot;data/data/2023/D20230314/D20230314T003836_IFCB134&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Extract .png images</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="fu">ifcb_extract_pngs</span>(<span class="fu">paste0</span>(sample_path, <span class="st">&quot;.roi&quot;</span>))</span></code></pre></div>
<pre><code>## Writing 1122 ROIs from D20230314T003836_IFCB134.roi to data/data/2023/D20230314/D20230314T003836_IFCB134</code></pre>
</div>
<div id="summarize-image-metadata" class="section level3">
<h3>Summarize Image Metadata</h3>
<p>Extract image metadata from the <code>.png</code> directory:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Extract image metadata</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>metadata_sample <span class="ot">&lt;-</span> <span class="fu">ifcb_summarize_png_metadata</span>(sample_path)</span></code></pre></div>
</div>
<div id="map-ecotaxa-headers" class="section level3">
<h3>Map EcoTaxa Headers</h3>
<p>The image metadata are mapped to the Ecotaxa metadata headers that
are required when submitting data to EcoTaxa. In this example, a minimal
dataset is used, containing only the image name. More comprehensive
headers can be specified through the arguments of <a href="../reference/ifcb_get_ecotaxa_example.html"><code>ifcb_get_ecotaxa_example</code></a>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Get the minimal EcoTaxa metadata header names</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>ecotaxa_minimal_headers <span class="ot">&lt;-</span> <span class="fu">ifcb_get_ecotaxa_example</span>(<span class="st">&quot;minimal&quot;</span>)[<span class="dv">0</span>,]</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># Create a data frame with empty rows matching the length of data</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>ecotaxa_minimal_headers[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(metadata_sample),] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co"># Map metadata to Ecotaxa headers</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>ecotaxa_minimal <span class="ot">&lt;-</span> ecotaxa_minimal_headers <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">img_file_name =</span> metadata_sample<span class="sc">$</span>image,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>         <span class="at">object_id =</span> tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(metadata_sample<span class="sc">$</span>image))</span></code></pre></div>
</div>
<div id="generate-ecotaxa-tsv-and-zip-files" class="section level3">
<h3>Generate EcoTaxa TSV and ZIP Files</h3>
<p>The metadata for all images in the subfolder are stored in a
<code>.tsv</code> file, and a zipped archive is prepared for submission
to EcoTaxa.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Write metadata tsv file</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">write_tsv</span>(ecotaxa_minimal,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>          <span class="fu">file.path</span>(</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>            sample_path,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>            <span class="fu">paste0</span>(<span class="st">&quot;ecotaxa_D20230314T003836_IFCB134.tsv&quot;</span>)),</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>          <span class="at">na =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co"># Create zip-archive</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">ifcb_zip_pngs</span>(<span class="at">png_folder =</span> <span class="st">&quot;data/data/2023/D20230314/&quot;</span>,</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>              <span class="at">zip_filename =</span> <span class="st">&quot;data/zip/D20230314T003836_IFCB134_ecotaxa.zip&quot;</span>,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>              <span class="at">include_txt =</span> <span class="cn">TRUE</span>, <span class="co"># To include the metadata text-files in the archive</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>              <span class="at">split_zip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>              <span class="at">max_size =</span> <span class="dv">500</span>,</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>              <span class="at">print_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Creating zip archive...
## Zip archive created successfully: /private/var/folders/7t/9x250txj7hz4v60rzqtpn9jm0000gn/T/Rtmp4sQWoM/Rbuildf6a31bdf4361/iRfcb/vignettes/data/zip/D20230314T003836_IFCB134_ecotaxa.zip</code></pre>
</div>
</div>
<div id="annotated-images" class="section level2">
<h2>Annotated Images</h2>
<p>This example demonstrates how to prepare a dataset of manually
annotated images for submission to EcoTaxa. The annotations were
generated using MATLAB code from the <a href="https://github.com/hsosik/ifcb-analysis">ifcb-analysis</a>
repository (Sosik and Olson, 2007).</p>
<div id="extract-annotated-images" class="section level3">
<h3>Extract Annotated Images</h3>
<p>Extract annotated ROIs as <code>.png</code> images in subfolders for
each class, skipping the <strong>unclassified</strong> (class id 1)
category:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Extract .png images</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">ifcb_extract_annotated_images</span>(<span class="at">manual_folder =</span> <span class="st">&quot;data/manual&quot;</span>,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>                              <span class="at">class2use_file =</span> <span class="st">&quot;data/config/class2use.mat&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>                              <span class="at">roi_folders =</span> <span class="st">&quot;data/data&quot;</span>,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>                              <span class="at">out_folder =</span> <span class="st">&quot;data/extracted_images&quot;</span>,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>                              <span class="at">skip_class =</span> <span class="dv">1</span>, <span class="co"># or &quot;unclassified&quot;</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>                              <span class="at">verbose =</span> <span class="cn">FALSE</span>) <span class="co"># Do not print messages</span></span></code></pre></div>
</div>
<div id="summarize-image-metadata-1" class="section level3">
<h3>Summarize Image Metadata</h3>
<p>This section demonstrates how to gather and summarize metadata for
images in the <code>png_folder</code> by combining data from feature and
<code>.hdr</code> files. Additionally, it retrieves the analysis date
and time for each sample based on <code>.mat</code> file creation dates
and appends this information to the summarized dataset.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Summarize image metadata from feature and hdr files</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">ifcb_summarize_png_metadata</span>(<span class="at">png_folder =</span> <span class="st">&quot;data/extracted_images&quot;</span>,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                                        <span class="at">feature_folder =</span> <span class="st">&quot;data/features&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>                                        <span class="at">hdr_folder =</span> <span class="st">&quot;data/data&quot;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co"># Print the first ten columns of output</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>manual_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;data/manual&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;.mat&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co"># Get file info the the .mat files</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>file_info <span class="ot">&lt;-</span> <span class="fu">file.info</span>(manual_files)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co"># Extract analysis date and time based file timestamps</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>analysis_date <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sample =</span> <span class="fu">sub</span>(<span class="st">&quot;.mat$&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">basename</span>(manual_files)), </span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>                            <span class="at">analysis_date =</span> <span class="fu">as.Date</span>(file_info<span class="sc">$</span>ctime), </span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>                            <span class="at">analysis_time =</span> <span class="fu">format</span>(<span class="fu">ymd_hms</span>(file_info<span class="sc">$</span>ctime), <span class="st">&quot;%H:%M:%S&quot;</span>))</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co"># Merge with metadata</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> metadata <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>  <span class="fu">left_join</span>(analysis_date, <span class="at">by =</span> <span class="st">&quot;sample&quot;</span>)</span></code></pre></div>
</div>
<div id="taxonomic-data-cleaning-and-retrieval" class="section level3">
<h3>Taxonomic Data Cleaning and Retrieval</h3>
<p>Class names often contain unnecessary or inconsistent information.
These names need to be cleaned before mapping them to higher taxonomic
levels using external sources like <a href="https://www.marinespecies.org/">WoRMS</a>. The following code
demonstrates how to clean class names and retrieve taxonomic details
from WoRMS, such as <strong>AphiaID</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Get taxa names</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>taxa_names <span class="ot">&lt;-</span> <span class="fu">unique</span>(metadata<span class="sc">$</span>subfolder)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co"># Clean taxa_names by substituting specific patterns with spaces or empty strings</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> iRfcb<span class="sc">:::</span><span class="fu">truncate_folder_name</span>(taxa_names) <span class="co"># Remove numerics from folder name</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>, taxa_names_clean)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; single cell&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; chain&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;-like&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; larger than 30unidentified&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; smaller than 30unidentified&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co"># Remove species flags from class names</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&lt;spp</span><span class="sc">\\</span><span class="st">&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, taxa_names_clean)</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;  &quot;</span>, <span class="st">&quot; &quot;</span>, taxa_names_clean)</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co"># Turn f to f. for forma</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">bf</span><span class="sc">\\</span><span class="st">b&quot;</span>, <span class="st">&quot;f.&quot;</span>, taxa_names_clean)</span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co"># Add &quot;/&quot; for multiple names with capital letters</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co"># e.g. Heterocapsa_Azadinium to Heterocapsa/Azadinium</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; ([A-Z])&quot;</span>, <span class="st">&quot;/</span><span class="sc">\\</span><span class="st">1&quot;</span>, taxa_names_clean)</span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot; ([A-Z])&quot;</span>, <span class="st">&quot;/</span><span class="sc">\\</span><span class="st">1&quot;</span>, taxa_names_clean)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="co"># Remove any whitespace</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>taxa_names_clean <span class="ot">&lt;-</span> <span class="fu">trimws</span>(taxa_names_clean)</span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="co"># Retrieve worms records</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>worms_records <span class="ot">&lt;-</span> <span class="fu">ifcb_match_taxa_names</span>(taxa_names_clean,</span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a>                                       <span class="at">marine_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a>                                       <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a><span class="co"># Create data frame with taxa information and class names</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a>class_names <span class="ot">&lt;-</span> worms_records <span class="sc">%&gt;%</span></span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">subfolder =</span> taxa_names, <span class="at">class_clean =</span> taxa_names_clean)</span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a></span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a><span class="co"># Merge with metadata</span></span>
<span id="cb12-38"><a href="#cb12-38" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> metadata <span class="sc">%&gt;%</span></span>
<span id="cb12-39"><a href="#cb12-39" tabindex="-1"></a>  <span class="fu">left_join</span>(class_names, <span class="at">by =</span> <span class="st">&quot;subfolder&quot;</span>)</span></code></pre></div>
</div>
<div id="map-ecotaxa-headers-1" class="section level3">
<h3>Map EcoTaxa Headers</h3>
<p>The metadata can be mapped with the headers in <a href="../reference/ifcb_get_ecotaxa_example.html"><code>ifcb_get_ecotaxa_example</code></a>
to produce metadata files suitable for submitting images to EcoTaxa. The
example below is comprehensive and includes several feature fields. For
a simpler dataset, minimal fields can be retrieved using
<code>ifcb_get_ecotaxa_example(example = &quot;minimal&quot;)</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Get EcoTaxa metadata header names</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>ecotaxa_headers <span class="ot">&lt;-</span> <span class="fu">ifcb_get_ecotaxa_example</span>()[<span class="dv">0</span>,]</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Create a data frame with empty rows matching the length of data</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>ecotaxa_headers[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(metadata),] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co"># Map metadata to populate the empty dataframe</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>ecotaxa_metadata <span class="ot">&lt;-</span> ecotaxa_headers <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    </span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>    <span class="co"># Image fields</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>    <span class="at">img_file_name =</span> metadata<span class="sc">$</span>image,</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>    </span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>    <span class="co"># Static information</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>    <span class="at">object_link =</span> <span class="st">&quot;https://doi.org/10.17044/scilifelab.25883455&quot;</span>,</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>    <span class="at">object_annotation_status =</span> <span class="st">&quot;validated&quot;</span>,</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>    <span class="at">acq_resolution_pixels_per_micron =</span> <span class="fl">3.4</span>,</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>    <span class="at">acq_instrument =</span> <span class="st">&quot;IFCB&quot;</span>,</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>    <span class="at">sample_source =</span> <span class="st">&quot;flowthrough&quot;</span>,</span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>    </span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>    <span class="co"># Software</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>    <span class="at">process_soft =</span> <span class="st">&quot;MATLAB, R&quot;</span>,</span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a>    <span class="at">process_soft_version =</span> <span class="fu">paste0</span>(<span class="st">&quot;R2022a, &quot;</span>, version<span class="sc">$</span>version.string),</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a>    <span class="at">process_library =</span> <span class="st">&quot;ifcb-analysis&quot;</span>,</span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a>    <span class="at">process_library_version =</span> <span class="dv">2</span>,</span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a>    <span class="at">process_script =</span> <span class="st">&quot;iRfcb&quot;</span>,</span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a>    <span class="at">process_script_version =</span> <span class="fu">as.character</span>(<span class="fu">packageVersion</span>(<span class="st">&quot;iRfcb&quot;</span>)),</span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a>    <span class="at">process_date =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(),<span class="st">&quot;%Y%m%d&quot;</span>), </span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a>    <span class="at">process_time =</span> <span class="fu">format</span>(<span class="fu">Sys.time</span>(),<span class="st">&quot;%H%M%S&quot;</span>),</span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a>    </span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a>    <span class="co"># Object-related fields</span></span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a>    <span class="at">object_id =</span> tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(metadata<span class="sc">$</span>image),  </span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a>    <span class="at">object_roi_number =</span> metadata<span class="sc">$</span>roi,</span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a>    <span class="at">object_lat =</span> metadata<span class="sc">$</span>gpsLatitude,</span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a>    <span class="at">object_lon =</span> metadata<span class="sc">$</span>gpsLongitude,</span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a>    <span class="at">object_date =</span> <span class="fu">format</span>(metadata<span class="sc">$</span>date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a>    <span class="at">object_time =</span> <span class="fu">gsub</span>(<span class="st">&quot;:&quot;</span>, <span class="st">&quot;&quot;</span>, metadata<span class="sc">$</span>time),</span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a>    <span class="at">object_annotation_hierarchy =</span> metadata<span class="sc">$</span>subfolder,</span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a>    <span class="at">object_annotation_category =</span> metadata<span class="sc">$</span>class_clean,</span>
<span id="cb13-40"><a href="#cb13-40" tabindex="-1"></a>    <span class="at">object_aphiaid =</span> metadata<span class="sc">$</span>AphiaID,</span>
<span id="cb13-41"><a href="#cb13-41" tabindex="-1"></a>    <span class="at">object_annotation_date =</span> <span class="fu">format</span>(metadata<span class="sc">$</span>analysis_date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb13-42"><a href="#cb13-42" tabindex="-1"></a>    <span class="at">object_annotation_time =</span> <span class="fu">gsub</span>(<span class="st">&quot;:&quot;</span>, <span class="st">&quot;&quot;</span>, metadata<span class="sc">$</span>analysis_time),</span>
<span id="cb13-43"><a href="#cb13-43" tabindex="-1"></a>    <span class="at">object_annotation_person_name =</span> <span class="st">&quot;John Doe&quot;</span>,</span>
<span id="cb13-44"><a href="#cb13-44" tabindex="-1"></a>    <span class="at">object_annotation_person_email =</span> <span class="st">&quot;john.doe@email.com&quot;</span>,</span>
<span id="cb13-45"><a href="#cb13-45" tabindex="-1"></a>    </span>
<span id="cb13-46"><a href="#cb13-46" tabindex="-1"></a>    <span class="co"># Depth fields</span></span>
<span id="cb13-47"><a href="#cb13-47" tabindex="-1"></a>    <span class="at">object_depth_min =</span> <span class="dv">4</span>, <span class="co"># Sampled at 4 m depth</span></span>
<span id="cb13-48"><a href="#cb13-48" tabindex="-1"></a>    <span class="at">object_depth_max =</span> <span class="dv">4</span>, <span class="co"># Sampled at 4 m depth</span></span>
<span id="cb13-49"><a href="#cb13-49" tabindex="-1"></a>    </span>
<span id="cb13-50"><a href="#cb13-50" tabindex="-1"></a>    <span class="co"># Sample fields</span></span>
<span id="cb13-51"><a href="#cb13-51" tabindex="-1"></a>    <span class="at">sample_vessel =</span> <span class="st">&quot;RV Svea&quot;</span>,</span>
<span id="cb13-52"><a href="#cb13-52" tabindex="-1"></a>    <span class="at">sample_id =</span> metadata<span class="sc">$</span>sample,</span>
<span id="cb13-53"><a href="#cb13-53" tabindex="-1"></a>    <span class="at">sample_station =</span> <span class="cn">NA</span>,</span>
<span id="cb13-54"><a href="#cb13-54" tabindex="-1"></a>    <span class="at">sample_cruise =</span> <span class="cn">NA</span>,</span>
<span id="cb13-55"><a href="#cb13-55" tabindex="-1"></a>    </span>
<span id="cb13-56"><a href="#cb13-56" tabindex="-1"></a>    <span class="do">### Features fields</span></span>
<span id="cb13-57"><a href="#cb13-57" tabindex="-1"></a>    </span>
<span id="cb13-58"><a href="#cb13-58" tabindex="-1"></a>    <span class="co"># PMT</span></span>
<span id="cb13-59"><a href="#cb13-59" tabindex="-1"></a>    <span class="at">object_pmt_scattering =</span> <span class="cn">NA</span>,</span>
<span id="cb13-60"><a href="#cb13-60" tabindex="-1"></a>    <span class="at">object_pmt_fluorescence =</span> <span class="cn">NA</span>,</span>
<span id="cb13-61"><a href="#cb13-61" tabindex="-1"></a>    </span>
<span id="cb13-62"><a href="#cb13-62" tabindex="-1"></a>    <span class="co"># Morphological metrics</span></span>
<span id="cb13-63"><a href="#cb13-63" tabindex="-1"></a>    <span class="at">object_area =</span> metadata<span class="sc">$</span>Area,  </span>
<span id="cb13-64"><a href="#cb13-64" tabindex="-1"></a>    <span class="at">object_biovolume =</span> metadata<span class="sc">$</span>Biovolume,</span>
<span id="cb13-65"><a href="#cb13-65" tabindex="-1"></a>    <span class="at">object_perimeter =</span> metadata<span class="sc">$</span>Perimeter,</span>
<span id="cb13-66"><a href="#cb13-66" tabindex="-1"></a>    <span class="at">object_bounding_box_xwidth =</span> metadata<span class="sc">$</span>BoundingBox_xwidth,</span>
<span id="cb13-67"><a href="#cb13-67" tabindex="-1"></a>    <span class="at">object_bounding_box_ywidth =</span> metadata<span class="sc">$</span>BoundingBox_ywidth,</span>
<span id="cb13-68"><a href="#cb13-68" tabindex="-1"></a>    <span class="at">object_convex_area =</span> metadata<span class="sc">$</span>ConvexArea,</span>
<span id="cb13-69"><a href="#cb13-69" tabindex="-1"></a>    <span class="at">object_convex_perimeter =</span> metadata<span class="sc">$</span>ConvexPerimeter,</span>
<span id="cb13-70"><a href="#cb13-70" tabindex="-1"></a>    <span class="at">object_feret_diameter =</span> metadata<span class="sc">$</span>FeretDiameter,</span>
<span id="cb13-71"><a href="#cb13-71" tabindex="-1"></a>    <span class="at">object_major_axis_length =</span> metadata<span class="sc">$</span>MajorAxisLength,</span>
<span id="cb13-72"><a href="#cb13-72" tabindex="-1"></a>    <span class="at">object_minor_axis_length =</span> metadata<span class="sc">$</span>MinorAxisLength,</span>
<span id="cb13-73"><a href="#cb13-73" tabindex="-1"></a>    <span class="at">object_orientation =</span> metadata<span class="sc">$</span>Orientation,</span>
<span id="cb13-74"><a href="#cb13-74" tabindex="-1"></a>    <span class="at">object_eccentricity =</span> metadata<span class="sc">$</span>Eccentricity,</span>
<span id="cb13-75"><a href="#cb13-75" tabindex="-1"></a>    <span class="at">object_equiv_diameter =</span> metadata<span class="sc">$</span>EquivDiameter,</span>
<span id="cb13-76"><a href="#cb13-76" tabindex="-1"></a>    <span class="at">object_extent =</span> metadata<span class="sc">$</span>Extent,</span>
<span id="cb13-77"><a href="#cb13-77" tabindex="-1"></a>    <span class="at">object_r_wcenter2total_powerratio =</span> metadata<span class="sc">$</span>RWcenter2total_powerratio,</span>
<span id="cb13-78"><a href="#cb13-78" tabindex="-1"></a>    <span class="at">object_r_whalfpowerintegral =</span> metadata<span class="sc">$</span>RWhalfpowerintegral,</span>
<span id="cb13-79"><a href="#cb13-79" tabindex="-1"></a>    </span>
<span id="cb13-80"><a href="#cb13-80" tabindex="-1"></a>    <span class="co"># Miscellaneous fields</span></span>
<span id="cb13-81"><a href="#cb13-81" tabindex="-1"></a>    <span class="at">object_solidity =</span> metadata<span class="sc">$</span>Solidity, </span>
<span id="cb13-82"><a href="#cb13-82" tabindex="-1"></a>    <span class="at">object_num_blobs =</span> metadata<span class="sc">$</span>numBlobs, </span>
<span id="cb13-83"><a href="#cb13-83" tabindex="-1"></a>    <span class="at">object_h180 =</span> metadata<span class="sc">$</span>H180, </span>
<span id="cb13-84"><a href="#cb13-84" tabindex="-1"></a>    <span class="at">object_h90 =</span> metadata<span class="sc">$</span>H90, </span>
<span id="cb13-85"><a href="#cb13-85" tabindex="-1"></a>    <span class="at">object_hflip =</span> metadata<span class="sc">$</span>Hflip,</span>
<span id="cb13-86"><a href="#cb13-86" tabindex="-1"></a>    <span class="at">object_summed_area =</span> metadata<span class="sc">$</span>summedArea,</span>
<span id="cb13-87"><a href="#cb13-87" tabindex="-1"></a>    <span class="at">object_summed_biovolume =</span> metadata<span class="sc">$</span>summedBiovolume,</span>
<span id="cb13-88"><a href="#cb13-88" tabindex="-1"></a>    <span class="at">object_summed_convex_area =</span> metadata<span class="sc">$</span>summedConvexArea,</span>
<span id="cb13-89"><a href="#cb13-89" tabindex="-1"></a>    <span class="at">object_summed_convex_perimeter =</span> metadata<span class="sc">$</span>summedConvexPerimeter,</span>
<span id="cb13-90"><a href="#cb13-90" tabindex="-1"></a>    <span class="at">object_summed_feret_diameter =</span> metadata<span class="sc">$</span>summedFeretDiameter,</span>
<span id="cb13-91"><a href="#cb13-91" tabindex="-1"></a>    <span class="at">object_summed_major_axis_length =</span> metadata<span class="sc">$</span>summedMajorAxisLength,</span>
<span id="cb13-92"><a href="#cb13-92" tabindex="-1"></a>    <span class="at">object_summed_minor_axis_length =</span> metadata<span class="sc">$</span>summedMinorAxisLength,</span>
<span id="cb13-93"><a href="#cb13-93" tabindex="-1"></a>    <span class="at">object_summed_perimeter =</span> metadata<span class="sc">$</span>summedPerimeter,</span>
<span id="cb13-94"><a href="#cb13-94" tabindex="-1"></a>    <span class="at">object_shapehist_kurtosis_norm_eq_d =</span> metadata<span class="sc">$</span>shapehist_kurtosis_normEqD,</span>
<span id="cb13-95"><a href="#cb13-95" tabindex="-1"></a>    <span class="at">object_shapehist_mean_norm_eq_d =</span> metadata<span class="sc">$</span>shapehist_mean_normEqD,</span>
<span id="cb13-96"><a href="#cb13-96" tabindex="-1"></a>    <span class="at">object_shapehist_median_norm_eq_d =</span> metadata<span class="sc">$</span>shapehist_median_normEqD,</span>
<span id="cb13-97"><a href="#cb13-97" tabindex="-1"></a>    <span class="at">object_shapehist_mode_norm_eq_d =</span> metadata<span class="sc">$</span>shapehist_mode_normEqD,</span>
<span id="cb13-98"><a href="#cb13-98" tabindex="-1"></a>    <span class="at">object_shapehist_skewness_norm_eq_d =</span> metadata<span class="sc">$</span>shapehist_skewness_normEqD,</span>
<span id="cb13-99"><a href="#cb13-99" tabindex="-1"></a>    <span class="at">object_area_over_perimeter_squared =</span> metadata<span class="sc">$</span>Area_over_PerimeterSquared,</span>
<span id="cb13-100"><a href="#cb13-100" tabindex="-1"></a>    <span class="at">object_area_over_perimeter =</span> metadata<span class="sc">$</span>Area_over_Perimeter,</span>
<span id="cb13-101"><a href="#cb13-101" tabindex="-1"></a>    <span class="at">object_h90_over_hflip =</span> metadata<span class="sc">$</span>H90_over_Hflip,</span>
<span id="cb13-102"><a href="#cb13-102" tabindex="-1"></a>    <span class="at">object_h90_over_h180 =</span> metadata<span class="sc">$</span>H90_over_H180,</span>
<span id="cb13-103"><a href="#cb13-103" tabindex="-1"></a>    <span class="at">object_hflip_over_h180 =</span> metadata<span class="sc">$</span>Hflip_over_H180,</span>
<span id="cb13-104"><a href="#cb13-104" tabindex="-1"></a>    <span class="at">object_summed_convex_perimeter_over_perimeter =</span> metadata<span class="sc">$</span>summedConvexPerimeter_over_Perimeter,</span>
<span id="cb13-105"><a href="#cb13-105" tabindex="-1"></a>    <span class="at">object_rotated_bounding_box_solidity =</span> metadata<span class="sc">$</span>rotated_BoundingBox_solidity,</span>
<span id="cb13-106"><a href="#cb13-106" tabindex="-1"></a>    <span class="at">object_rotated_area =</span> metadata<span class="sc">$</span>RotatedArea,</span>
<span id="cb13-107"><a href="#cb13-107" tabindex="-1"></a>    <span class="at">object_rotated_bounding_box_xwidth =</span> metadata<span class="sc">$</span>RotatedBoundingBox_xwidth,</span>
<span id="cb13-108"><a href="#cb13-108" tabindex="-1"></a>    <span class="at">object_rotated_bounding_box_ywidth =</span> metadata<span class="sc">$</span>RotatedBoundingBox_ywidth,</span>
<span id="cb13-109"><a href="#cb13-109" tabindex="-1"></a>    </span>
<span id="cb13-110"><a href="#cb13-110" tabindex="-1"></a>    <span class="co"># Texture-related fields</span></span>
<span id="cb13-111"><a href="#cb13-111" tabindex="-1"></a>    <span class="at">object_texture_average_contrast =</span> metadata<span class="sc">$</span>texture_average_contrast,</span>
<span id="cb13-112"><a href="#cb13-112" tabindex="-1"></a>    <span class="at">object_texture_average_gray_level =</span> metadata<span class="sc">$</span>texture_average_gray_level,</span>
<span id="cb13-113"><a href="#cb13-113" tabindex="-1"></a>    <span class="at">object_texture_entropy =</span> metadata<span class="sc">$</span>texture_entropy,</span>
<span id="cb13-114"><a href="#cb13-114" tabindex="-1"></a>    <span class="at">object_texture_smoothness =</span> metadata<span class="sc">$</span>texture_smoothness,</span>
<span id="cb13-115"><a href="#cb13-115" tabindex="-1"></a>    <span class="at">object_texture_third_moment =</span> metadata<span class="sc">$</span>texture_third_moment,</span>
<span id="cb13-116"><a href="#cb13-116" tabindex="-1"></a>    <span class="at">object_texture_uniformity =</span> metadata<span class="sc">$</span>texture_uniformity,</span>
<span id="cb13-117"><a href="#cb13-117" tabindex="-1"></a>    </span>
<span id="cb13-118"><a href="#cb13-118" tabindex="-1"></a>    <span class="co"># Moment invariants</span></span>
<span id="cb13-119"><a href="#cb13-119" tabindex="-1"></a>    <span class="at">object_moment_invariant1 =</span> metadata<span class="sc">$</span>moment_invariant1,</span>
<span id="cb13-120"><a href="#cb13-120" tabindex="-1"></a>    <span class="at">object_moment_invariant2 =</span> metadata<span class="sc">$</span>moment_invariant2,</span>
<span id="cb13-121"><a href="#cb13-121" tabindex="-1"></a>    <span class="at">object_moment_invariant3 =</span> metadata<span class="sc">$</span>moment_invariant3,</span>
<span id="cb13-122"><a href="#cb13-122" tabindex="-1"></a>    <span class="at">object_moment_invariant4 =</span> metadata<span class="sc">$</span>moment_invariant4,</span>
<span id="cb13-123"><a href="#cb13-123" tabindex="-1"></a>    <span class="at">object_moment_invariant5 =</span> metadata<span class="sc">$</span>moment_invariant5,</span>
<span id="cb13-124"><a href="#cb13-124" tabindex="-1"></a>    <span class="at">object_moment_invariant6 =</span> metadata<span class="sc">$</span>moment_invariant6,</span>
<span id="cb13-125"><a href="#cb13-125" tabindex="-1"></a>    <span class="at">object_moment_invariant7 =</span> metadata<span class="sc">$</span>moment_invariant7,</span>
<span id="cb13-126"><a href="#cb13-126" tabindex="-1"></a>    </span>
<span id="cb13-127"><a href="#cb13-127" tabindex="-1"></a>    <span class="co"># Ring fields</span></span>
<span id="cb13-128"><a href="#cb13-128" tabindex="-1"></a>    <span class="at">object_ring01 =</span> metadata<span class="sc">$</span>Ring01,  </span>
<span id="cb13-129"><a href="#cb13-129" tabindex="-1"></a>    <span class="at">object_ring02 =</span> metadata<span class="sc">$</span>Ring02,  </span>
<span id="cb13-130"><a href="#cb13-130" tabindex="-1"></a>    <span class="at">object_ring03 =</span> metadata<span class="sc">$</span>Ring03,  </span>
<span id="cb13-131"><a href="#cb13-131" tabindex="-1"></a>    <span class="at">object_ring04 =</span> metadata<span class="sc">$</span>Ring04,  </span>
<span id="cb13-132"><a href="#cb13-132" tabindex="-1"></a>    <span class="at">object_ring05 =</span> metadata<span class="sc">$</span>Ring05,  </span>
<span id="cb13-133"><a href="#cb13-133" tabindex="-1"></a>    <span class="at">object_ring06 =</span> metadata<span class="sc">$</span>Ring06,  </span>
<span id="cb13-134"><a href="#cb13-134" tabindex="-1"></a>    <span class="at">object_ring07 =</span> metadata<span class="sc">$</span>Ring07,  </span>
<span id="cb13-135"><a href="#cb13-135" tabindex="-1"></a>    <span class="at">object_ring08 =</span> metadata<span class="sc">$</span>Ring08,  </span>
<span id="cb13-136"><a href="#cb13-136" tabindex="-1"></a>    <span class="at">object_ring09 =</span> metadata<span class="sc">$</span>Ring09,  </span>
<span id="cb13-137"><a href="#cb13-137" tabindex="-1"></a>    <span class="at">object_ring10 =</span> metadata<span class="sc">$</span>Ring10,  </span>
<span id="cb13-138"><a href="#cb13-138" tabindex="-1"></a>    <span class="at">object_ring11 =</span> metadata<span class="sc">$</span>Ring11,  </span>
<span id="cb13-139"><a href="#cb13-139" tabindex="-1"></a>    <span class="at">object_ring12 =</span> metadata<span class="sc">$</span>Ring12,  </span>
<span id="cb13-140"><a href="#cb13-140" tabindex="-1"></a>    <span class="at">object_ring13 =</span> metadata<span class="sc">$</span>Ring13,  </span>
<span id="cb13-141"><a href="#cb13-141" tabindex="-1"></a>    <span class="at">object_ring14 =</span> metadata<span class="sc">$</span>Ring14,  </span>
<span id="cb13-142"><a href="#cb13-142" tabindex="-1"></a>    <span class="at">object_ring15 =</span> metadata<span class="sc">$</span>Ring15,  </span>
<span id="cb13-143"><a href="#cb13-143" tabindex="-1"></a>    <span class="at">object_ring16 =</span> metadata<span class="sc">$</span>Ring16,  </span>
<span id="cb13-144"><a href="#cb13-144" tabindex="-1"></a>    <span class="at">object_ring17 =</span> metadata<span class="sc">$</span>Ring17,  </span>
<span id="cb13-145"><a href="#cb13-145" tabindex="-1"></a>    <span class="at">object_ring18 =</span> metadata<span class="sc">$</span>Ring18,  </span>
<span id="cb13-146"><a href="#cb13-146" tabindex="-1"></a>    <span class="at">object_ring19 =</span> metadata<span class="sc">$</span>Ring19,  </span>
<span id="cb13-147"><a href="#cb13-147" tabindex="-1"></a>    <span class="at">object_ring20 =</span> metadata<span class="sc">$</span>Ring20,  </span>
<span id="cb13-148"><a href="#cb13-148" tabindex="-1"></a>    <span class="at">object_ring21 =</span> metadata<span class="sc">$</span>Ring21,  </span>
<span id="cb13-149"><a href="#cb13-149" tabindex="-1"></a>    <span class="at">object_ring22 =</span> metadata<span class="sc">$</span>Ring22,  </span>
<span id="cb13-150"><a href="#cb13-150" tabindex="-1"></a>    <span class="at">object_ring23 =</span> metadata<span class="sc">$</span>Ring23,  </span>
<span id="cb13-151"><a href="#cb13-151" tabindex="-1"></a>    <span class="at">object_ring24 =</span> metadata<span class="sc">$</span>Ring24,  </span>
<span id="cb13-152"><a href="#cb13-152" tabindex="-1"></a>    <span class="at">object_ring25 =</span> metadata<span class="sc">$</span>Ring25,  </span>
<span id="cb13-153"><a href="#cb13-153" tabindex="-1"></a>    <span class="at">object_ring26 =</span> metadata<span class="sc">$</span>Ring26,  </span>
<span id="cb13-154"><a href="#cb13-154" tabindex="-1"></a>    <span class="at">object_ring27 =</span> metadata<span class="sc">$</span>Ring27,  </span>
<span id="cb13-155"><a href="#cb13-155" tabindex="-1"></a>    <span class="at">object_ring28 =</span> metadata<span class="sc">$</span>Ring28,  </span>
<span id="cb13-156"><a href="#cb13-156" tabindex="-1"></a>    <span class="at">object_ring29 =</span> metadata<span class="sc">$</span>Ring29,  </span>
<span id="cb13-157"><a href="#cb13-157" tabindex="-1"></a>    <span class="at">object_ring30 =</span> metadata<span class="sc">$</span>Ring30,  </span>
<span id="cb13-158"><a href="#cb13-158" tabindex="-1"></a>    <span class="at">object_ring31 =</span> metadata<span class="sc">$</span>Ring31,  </span>
<span id="cb13-159"><a href="#cb13-159" tabindex="-1"></a>    <span class="at">object_ring32 =</span> metadata<span class="sc">$</span>Ring32,  </span>
<span id="cb13-160"><a href="#cb13-160" tabindex="-1"></a>    <span class="at">object_ring33 =</span> metadata<span class="sc">$</span>Ring33,  </span>
<span id="cb13-161"><a href="#cb13-161" tabindex="-1"></a>    <span class="at">object_ring34 =</span> metadata<span class="sc">$</span>Ring34,  </span>
<span id="cb13-162"><a href="#cb13-162" tabindex="-1"></a>    <span class="at">object_ring35 =</span> metadata<span class="sc">$</span>Ring35,  </span>
<span id="cb13-163"><a href="#cb13-163" tabindex="-1"></a>    <span class="at">object_ring36 =</span> metadata<span class="sc">$</span>Ring36,  </span>
<span id="cb13-164"><a href="#cb13-164" tabindex="-1"></a>    <span class="at">object_ring37 =</span> metadata<span class="sc">$</span>Ring37,  </span>
<span id="cb13-165"><a href="#cb13-165" tabindex="-1"></a>    <span class="at">object_ring38 =</span> metadata<span class="sc">$</span>Ring38,  </span>
<span id="cb13-166"><a href="#cb13-166" tabindex="-1"></a>    <span class="at">object_ring39 =</span> metadata<span class="sc">$</span>Ring39,  </span>
<span id="cb13-167"><a href="#cb13-167" tabindex="-1"></a>    <span class="at">object_ring40 =</span> metadata<span class="sc">$</span>Ring40,  </span>
<span id="cb13-168"><a href="#cb13-168" tabindex="-1"></a>    <span class="at">object_ring41 =</span> metadata<span class="sc">$</span>Ring41,  </span>
<span id="cb13-169"><a href="#cb13-169" tabindex="-1"></a>    <span class="at">object_ring42 =</span> metadata<span class="sc">$</span>Ring42,  </span>
<span id="cb13-170"><a href="#cb13-170" tabindex="-1"></a>    <span class="at">object_ring43 =</span> metadata<span class="sc">$</span>Ring43,  </span>
<span id="cb13-171"><a href="#cb13-171" tabindex="-1"></a>    <span class="at">object_ring44 =</span> metadata<span class="sc">$</span>Ring44,  </span>
<span id="cb13-172"><a href="#cb13-172" tabindex="-1"></a>    <span class="at">object_ring45 =</span> metadata<span class="sc">$</span>Ring45,  </span>
<span id="cb13-173"><a href="#cb13-173" tabindex="-1"></a>    <span class="at">object_ring46 =</span> metadata<span class="sc">$</span>Ring46,  </span>
<span id="cb13-174"><a href="#cb13-174" tabindex="-1"></a>    <span class="at">object_ring47 =</span> metadata<span class="sc">$</span>Ring47,  </span>
<span id="cb13-175"><a href="#cb13-175" tabindex="-1"></a>    <span class="at">object_ring48 =</span> metadata<span class="sc">$</span>Ring48,  </span>
<span id="cb13-176"><a href="#cb13-176" tabindex="-1"></a>    <span class="at">object_ring49 =</span> metadata<span class="sc">$</span>Ring49,  </span>
<span id="cb13-177"><a href="#cb13-177" tabindex="-1"></a>    <span class="at">object_ring50 =</span> metadata<span class="sc">$</span>Ring50,  </span>
<span id="cb13-178"><a href="#cb13-178" tabindex="-1"></a>    </span>
<span id="cb13-179"><a href="#cb13-179" tabindex="-1"></a>    <span class="co"># HOG fields</span></span>
<span id="cb13-180"><a href="#cb13-180" tabindex="-1"></a>    <span class="at">object_hog01 =</span> metadata<span class="sc">$</span>HOG01,  </span>
<span id="cb13-181"><a href="#cb13-181" tabindex="-1"></a>    <span class="at">object_hog02 =</span> metadata<span class="sc">$</span>HOG02,  </span>
<span id="cb13-182"><a href="#cb13-182" tabindex="-1"></a>    <span class="at">object_hog03 =</span> metadata<span class="sc">$</span>HOG03,  </span>
<span id="cb13-183"><a href="#cb13-183" tabindex="-1"></a>    <span class="at">object_hog04 =</span> metadata<span class="sc">$</span>HOG04,  </span>
<span id="cb13-184"><a href="#cb13-184" tabindex="-1"></a>    <span class="at">object_hog05 =</span> metadata<span class="sc">$</span>HOG05,  </span>
<span id="cb13-185"><a href="#cb13-185" tabindex="-1"></a>    <span class="at">object_hog06 =</span> metadata<span class="sc">$</span>HOG06,  </span>
<span id="cb13-186"><a href="#cb13-186" tabindex="-1"></a>    <span class="at">object_hog07 =</span> metadata<span class="sc">$</span>HOG07,  </span>
<span id="cb13-187"><a href="#cb13-187" tabindex="-1"></a>    <span class="at">object_hog08 =</span> metadata<span class="sc">$</span>HOG08,  </span>
<span id="cb13-188"><a href="#cb13-188" tabindex="-1"></a>    <span class="at">object_hog09 =</span> metadata<span class="sc">$</span>HOG09,  </span>
<span id="cb13-189"><a href="#cb13-189" tabindex="-1"></a>    <span class="at">object_hog10 =</span> metadata<span class="sc">$</span>HOG10,  </span>
<span id="cb13-190"><a href="#cb13-190" tabindex="-1"></a>    <span class="at">object_hog11 =</span> metadata<span class="sc">$</span>HOG11,  </span>
<span id="cb13-191"><a href="#cb13-191" tabindex="-1"></a>    <span class="at">object_hog12 =</span> metadata<span class="sc">$</span>HOG12,  </span>
<span id="cb13-192"><a href="#cb13-192" tabindex="-1"></a>    <span class="at">object_hog13 =</span> metadata<span class="sc">$</span>HOG13,  </span>
<span id="cb13-193"><a href="#cb13-193" tabindex="-1"></a>    <span class="at">object_hog14 =</span> metadata<span class="sc">$</span>HOG14,  </span>
<span id="cb13-194"><a href="#cb13-194" tabindex="-1"></a>    <span class="at">object_hog15 =</span> metadata<span class="sc">$</span>HOG15,  </span>
<span id="cb13-195"><a href="#cb13-195" tabindex="-1"></a>    <span class="at">object_hog16 =</span> metadata<span class="sc">$</span>HOG16,  </span>
<span id="cb13-196"><a href="#cb13-196" tabindex="-1"></a>    <span class="at">object_hog17 =</span> metadata<span class="sc">$</span>HOG17,  </span>
<span id="cb13-197"><a href="#cb13-197" tabindex="-1"></a>    <span class="at">object_hog18 =</span> metadata<span class="sc">$</span>HOG18,  </span>
<span id="cb13-198"><a href="#cb13-198" tabindex="-1"></a>    <span class="at">object_hog19 =</span> metadata<span class="sc">$</span>HOG19,  </span>
<span id="cb13-199"><a href="#cb13-199" tabindex="-1"></a>    <span class="at">object_hog20 =</span> metadata<span class="sc">$</span>HOG20,  </span>
<span id="cb13-200"><a href="#cb13-200" tabindex="-1"></a>    <span class="at">object_hog21 =</span> metadata<span class="sc">$</span>HOG21,  </span>
<span id="cb13-201"><a href="#cb13-201" tabindex="-1"></a>    <span class="at">object_hog22 =</span> metadata<span class="sc">$</span>HOG22,  </span>
<span id="cb13-202"><a href="#cb13-202" tabindex="-1"></a>    <span class="at">object_hog23 =</span> metadata<span class="sc">$</span>HOG23,  </span>
<span id="cb13-203"><a href="#cb13-203" tabindex="-1"></a>    <span class="at">object_hog24 =</span> metadata<span class="sc">$</span>HOG24,  </span>
<span id="cb13-204"><a href="#cb13-204" tabindex="-1"></a>    <span class="at">object_hog25 =</span> metadata<span class="sc">$</span>HOG25,  </span>
<span id="cb13-205"><a href="#cb13-205" tabindex="-1"></a>    <span class="at">object_hog26 =</span> metadata<span class="sc">$</span>HOG26,  </span>
<span id="cb13-206"><a href="#cb13-206" tabindex="-1"></a>    <span class="at">object_hog27 =</span> metadata<span class="sc">$</span>HOG27,  </span>
<span id="cb13-207"><a href="#cb13-207" tabindex="-1"></a>    <span class="at">object_hog28 =</span> metadata<span class="sc">$</span>HOG28,  </span>
<span id="cb13-208"><a href="#cb13-208" tabindex="-1"></a>    <span class="at">object_hog29 =</span> metadata<span class="sc">$</span>HOG29,  </span>
<span id="cb13-209"><a href="#cb13-209" tabindex="-1"></a>    <span class="at">object_hog30 =</span> metadata<span class="sc">$</span>HOG30,  </span>
<span id="cb13-210"><a href="#cb13-210" tabindex="-1"></a>    <span class="at">object_hog31 =</span> metadata<span class="sc">$</span>HOG31,  </span>
<span id="cb13-211"><a href="#cb13-211" tabindex="-1"></a>    <span class="at">object_hog32 =</span> metadata<span class="sc">$</span>HOG32,  </span>
<span id="cb13-212"><a href="#cb13-212" tabindex="-1"></a>    <span class="at">object_hog33 =</span> metadata<span class="sc">$</span>HOG33,  </span>
<span id="cb13-213"><a href="#cb13-213" tabindex="-1"></a>    <span class="at">object_hog34 =</span> metadata<span class="sc">$</span>HOG34,  </span>
<span id="cb13-214"><a href="#cb13-214" tabindex="-1"></a>    <span class="at">object_hog35 =</span> metadata<span class="sc">$</span>HOG35,  </span>
<span id="cb13-215"><a href="#cb13-215" tabindex="-1"></a>    <span class="at">object_hog36 =</span> metadata<span class="sc">$</span>HOG36,  </span>
<span id="cb13-216"><a href="#cb13-216" tabindex="-1"></a>    <span class="at">object_hog37 =</span> metadata<span class="sc">$</span>HOG37,  </span>
<span id="cb13-217"><a href="#cb13-217" tabindex="-1"></a>    <span class="at">object_hog38 =</span> metadata<span class="sc">$</span>HOG38,  </span>
<span id="cb13-218"><a href="#cb13-218" tabindex="-1"></a>    <span class="at">object_hog39 =</span> metadata<span class="sc">$</span>HOG39,  </span>
<span id="cb13-219"><a href="#cb13-219" tabindex="-1"></a>    <span class="at">object_hog40 =</span> metadata<span class="sc">$</span>HOG40,  </span>
<span id="cb13-220"><a href="#cb13-220" tabindex="-1"></a>    <span class="at">object_hog41 =</span> metadata<span class="sc">$</span>HOG41,  </span>
<span id="cb13-221"><a href="#cb13-221" tabindex="-1"></a>    <span class="at">object_hog42 =</span> metadata<span class="sc">$</span>HOG42,  </span>
<span id="cb13-222"><a href="#cb13-222" tabindex="-1"></a>    <span class="at">object_hog43 =</span> metadata<span class="sc">$</span>HOG43,  </span>
<span id="cb13-223"><a href="#cb13-223" tabindex="-1"></a>    <span class="at">object_hog44 =</span> metadata<span class="sc">$</span>HOG44,  </span>
<span id="cb13-224"><a href="#cb13-224" tabindex="-1"></a>    <span class="at">object_hog45 =</span> metadata<span class="sc">$</span>HOG45,  </span>
<span id="cb13-225"><a href="#cb13-225" tabindex="-1"></a>    <span class="at">object_hog46 =</span> metadata<span class="sc">$</span>HOG46,  </span>
<span id="cb13-226"><a href="#cb13-226" tabindex="-1"></a>    <span class="at">object_hog47 =</span> metadata<span class="sc">$</span>HOG47,  </span>
<span id="cb13-227"><a href="#cb13-227" tabindex="-1"></a>    <span class="at">object_hog48 =</span> metadata<span class="sc">$</span>HOG48,  </span>
<span id="cb13-228"><a href="#cb13-228" tabindex="-1"></a>    <span class="at">object_hog49 =</span> metadata<span class="sc">$</span>HOG49,  </span>
<span id="cb13-229"><a href="#cb13-229" tabindex="-1"></a>    <span class="at">object_hog50 =</span> metadata<span class="sc">$</span>HOG50,</span>
<span id="cb13-230"><a href="#cb13-230" tabindex="-1"></a>    <span class="at">object_hog51 =</span> metadata<span class="sc">$</span>HOG51,</span>
<span id="cb13-231"><a href="#cb13-231" tabindex="-1"></a>    <span class="at">object_hog52 =</span> metadata<span class="sc">$</span>HOG52,</span>
<span id="cb13-232"><a href="#cb13-232" tabindex="-1"></a>    <span class="at">object_hog53 =</span> metadata<span class="sc">$</span>HOG53,</span>
<span id="cb13-233"><a href="#cb13-233" tabindex="-1"></a>    <span class="at">object_hog54 =</span> metadata<span class="sc">$</span>HOG54,</span>
<span id="cb13-234"><a href="#cb13-234" tabindex="-1"></a>    <span class="at">object_hog55 =</span> metadata<span class="sc">$</span>HOG55,</span>
<span id="cb13-235"><a href="#cb13-235" tabindex="-1"></a>    <span class="at">object_hog56 =</span> metadata<span class="sc">$</span>HOG56,</span>
<span id="cb13-236"><a href="#cb13-236" tabindex="-1"></a>    <span class="at">object_hog57 =</span> metadata<span class="sc">$</span>HOG57,</span>
<span id="cb13-237"><a href="#cb13-237" tabindex="-1"></a>    <span class="at">object_hog58 =</span> metadata<span class="sc">$</span>HOG58,</span>
<span id="cb13-238"><a href="#cb13-238" tabindex="-1"></a>    <span class="at">object_hog59 =</span> metadata<span class="sc">$</span>HOG59,</span>
<span id="cb13-239"><a href="#cb13-239" tabindex="-1"></a>    <span class="at">object_hog60 =</span> metadata<span class="sc">$</span>HOG60,</span>
<span id="cb13-240"><a href="#cb13-240" tabindex="-1"></a>    <span class="at">object_hog61 =</span> metadata<span class="sc">$</span>HOG61,</span>
<span id="cb13-241"><a href="#cb13-241" tabindex="-1"></a>    <span class="at">object_hog62 =</span> metadata<span class="sc">$</span>HOG62,</span>
<span id="cb13-242"><a href="#cb13-242" tabindex="-1"></a>    <span class="at">object_hog63 =</span> metadata<span class="sc">$</span>HOG63,</span>
<span id="cb13-243"><a href="#cb13-243" tabindex="-1"></a>    <span class="at">object_hog64 =</span> metadata<span class="sc">$</span>HOG64,</span>
<span id="cb13-244"><a href="#cb13-244" tabindex="-1"></a>    <span class="at">object_hog65 =</span> metadata<span class="sc">$</span>HOG65,</span>
<span id="cb13-245"><a href="#cb13-245" tabindex="-1"></a>    <span class="at">object_hog66 =</span> metadata<span class="sc">$</span>HOG66,</span>
<span id="cb13-246"><a href="#cb13-246" tabindex="-1"></a>    <span class="at">object_hog67 =</span> metadata<span class="sc">$</span>HOG67,</span>
<span id="cb13-247"><a href="#cb13-247" tabindex="-1"></a>    <span class="at">object_hog68 =</span> metadata<span class="sc">$</span>HOG68,</span>
<span id="cb13-248"><a href="#cb13-248" tabindex="-1"></a>    <span class="at">object_hog69 =</span> metadata<span class="sc">$</span>HOG69,</span>
<span id="cb13-249"><a href="#cb13-249" tabindex="-1"></a>    <span class="at">object_hog70 =</span> metadata<span class="sc">$</span>HOG70,</span>
<span id="cb13-250"><a href="#cb13-250" tabindex="-1"></a>    <span class="at">object_hog71 =</span> metadata<span class="sc">$</span>HOG71,</span>
<span id="cb13-251"><a href="#cb13-251" tabindex="-1"></a>    <span class="at">object_hog72 =</span> metadata<span class="sc">$</span>HOG72,</span>
<span id="cb13-252"><a href="#cb13-252" tabindex="-1"></a>    <span class="at">object_hog73 =</span> metadata<span class="sc">$</span>HOG73,</span>
<span id="cb13-253"><a href="#cb13-253" tabindex="-1"></a>    <span class="at">object_hog74 =</span> metadata<span class="sc">$</span>HOG74,</span>
<span id="cb13-254"><a href="#cb13-254" tabindex="-1"></a>    <span class="at">object_hog75 =</span> metadata<span class="sc">$</span>HOG75,</span>
<span id="cb13-255"><a href="#cb13-255" tabindex="-1"></a>    <span class="at">object_hog76 =</span> metadata<span class="sc">$</span>HOG76,</span>
<span id="cb13-256"><a href="#cb13-256" tabindex="-1"></a>    <span class="at">object_hog77 =</span> metadata<span class="sc">$</span>HOG77,</span>
<span id="cb13-257"><a href="#cb13-257" tabindex="-1"></a>    <span class="at">object_hog78 =</span> metadata<span class="sc">$</span>HOG78,</span>
<span id="cb13-258"><a href="#cb13-258" tabindex="-1"></a>    <span class="at">object_hog79 =</span> metadata<span class="sc">$</span>HOG79,</span>
<span id="cb13-259"><a href="#cb13-259" tabindex="-1"></a>    <span class="at">object_hog80 =</span> metadata<span class="sc">$</span>HOG80,</span>
<span id="cb13-260"><a href="#cb13-260" tabindex="-1"></a>    <span class="at">object_hog81 =</span> metadata<span class="sc">$</span>HOG81,</span>
<span id="cb13-261"><a href="#cb13-261" tabindex="-1"></a>    </span>
<span id="cb13-262"><a href="#cb13-262" tabindex="-1"></a>    <span class="co"># Wedge fields</span></span>
<span id="cb13-263"><a href="#cb13-263" tabindex="-1"></a>    <span class="at">object_wedge01 =</span> metadata<span class="sc">$</span>Wedge01,  </span>
<span id="cb13-264"><a href="#cb13-264" tabindex="-1"></a>    <span class="at">object_wedge02 =</span> metadata<span class="sc">$</span>Wedge02,  </span>
<span id="cb13-265"><a href="#cb13-265" tabindex="-1"></a>    <span class="at">object_wedge03 =</span> metadata<span class="sc">$</span>Wedge03,  </span>
<span id="cb13-266"><a href="#cb13-266" tabindex="-1"></a>    <span class="at">object_wedge04 =</span> metadata<span class="sc">$</span>Wedge04,  </span>
<span id="cb13-267"><a href="#cb13-267" tabindex="-1"></a>    <span class="at">object_wedge05 =</span> metadata<span class="sc">$</span>Wedge05,  </span>
<span id="cb13-268"><a href="#cb13-268" tabindex="-1"></a>    <span class="at">object_wedge06 =</span> metadata<span class="sc">$</span>Wedge06,  </span>
<span id="cb13-269"><a href="#cb13-269" tabindex="-1"></a>    <span class="at">object_wedge07 =</span> metadata<span class="sc">$</span>Wedge07,  </span>
<span id="cb13-270"><a href="#cb13-270" tabindex="-1"></a>    <span class="at">object_wedge08 =</span> metadata<span class="sc">$</span>Wedge08,  </span>
<span id="cb13-271"><a href="#cb13-271" tabindex="-1"></a>    <span class="at">object_wedge09 =</span> metadata<span class="sc">$</span>Wedge09,  </span>
<span id="cb13-272"><a href="#cb13-272" tabindex="-1"></a>    <span class="at">object_wedge10 =</span> metadata<span class="sc">$</span>Wedge10,  </span>
<span id="cb13-273"><a href="#cb13-273" tabindex="-1"></a>    <span class="at">object_wedge11 =</span> metadata<span class="sc">$</span>Wedge11,  </span>
<span id="cb13-274"><a href="#cb13-274" tabindex="-1"></a>    <span class="at">object_wedge12 =</span> metadata<span class="sc">$</span>Wedge12,  </span>
<span id="cb13-275"><a href="#cb13-275" tabindex="-1"></a>    <span class="at">object_wedge13 =</span> metadata<span class="sc">$</span>Wedge13,  </span>
<span id="cb13-276"><a href="#cb13-276" tabindex="-1"></a>    <span class="at">object_wedge14 =</span> metadata<span class="sc">$</span>Wedge14,  </span>
<span id="cb13-277"><a href="#cb13-277" tabindex="-1"></a>    <span class="at">object_wedge15 =</span> metadata<span class="sc">$</span>Wedge15,  </span>
<span id="cb13-278"><a href="#cb13-278" tabindex="-1"></a>    <span class="at">object_wedge16 =</span> metadata<span class="sc">$</span>Wedge16,  </span>
<span id="cb13-279"><a href="#cb13-279" tabindex="-1"></a>    <span class="at">object_wedge17 =</span> metadata<span class="sc">$</span>Wedge17,  </span>
<span id="cb13-280"><a href="#cb13-280" tabindex="-1"></a>    <span class="at">object_wedge18 =</span> metadata<span class="sc">$</span>Wedge18,  </span>
<span id="cb13-281"><a href="#cb13-281" tabindex="-1"></a>    <span class="at">object_wedge19 =</span> metadata<span class="sc">$</span>Wedge19,  </span>
<span id="cb13-282"><a href="#cb13-282" tabindex="-1"></a>    <span class="at">object_wedge20 =</span> metadata<span class="sc">$</span>Wedge20,  </span>
<span id="cb13-283"><a href="#cb13-283" tabindex="-1"></a>    <span class="at">object_wedge21 =</span> metadata<span class="sc">$</span>Wedge21,</span>
<span id="cb13-284"><a href="#cb13-284" tabindex="-1"></a>    <span class="at">object_wedge22 =</span> metadata<span class="sc">$</span>Wedge22,  </span>
<span id="cb13-285"><a href="#cb13-285" tabindex="-1"></a>    <span class="at">object_wedge23 =</span> metadata<span class="sc">$</span>Wedge23,  </span>
<span id="cb13-286"><a href="#cb13-286" tabindex="-1"></a>    <span class="at">object_wedge24 =</span> metadata<span class="sc">$</span>Wedge24,  </span>
<span id="cb13-287"><a href="#cb13-287" tabindex="-1"></a>    <span class="at">object_wedge25 =</span> metadata<span class="sc">$</span>Wedge25,  </span>
<span id="cb13-288"><a href="#cb13-288" tabindex="-1"></a>    <span class="at">object_wedge26 =</span> metadata<span class="sc">$</span>Wedge26,  </span>
<span id="cb13-289"><a href="#cb13-289" tabindex="-1"></a>    <span class="at">object_wedge27 =</span> metadata<span class="sc">$</span>Wedge27,  </span>
<span id="cb13-290"><a href="#cb13-290" tabindex="-1"></a>    <span class="at">object_wedge28 =</span> metadata<span class="sc">$</span>Wedge28,  </span>
<span id="cb13-291"><a href="#cb13-291" tabindex="-1"></a>    <span class="at">object_wedge29 =</span> metadata<span class="sc">$</span>Wedge29,  </span>
<span id="cb13-292"><a href="#cb13-292" tabindex="-1"></a>    <span class="at">object_wedge30 =</span> metadata<span class="sc">$</span>Wedge30,  </span>
<span id="cb13-293"><a href="#cb13-293" tabindex="-1"></a>    <span class="at">object_wedge31 =</span> metadata<span class="sc">$</span>Wedge31,  </span>
<span id="cb13-294"><a href="#cb13-294" tabindex="-1"></a>    <span class="at">object_wedge32 =</span> metadata<span class="sc">$</span>Wedge32,  </span>
<span id="cb13-295"><a href="#cb13-295" tabindex="-1"></a>    <span class="at">object_wedge33 =</span> metadata<span class="sc">$</span>Wedge33,  </span>
<span id="cb13-296"><a href="#cb13-296" tabindex="-1"></a>    <span class="at">object_wedge34 =</span> metadata<span class="sc">$</span>Wedge34,  </span>
<span id="cb13-297"><a href="#cb13-297" tabindex="-1"></a>    <span class="at">object_wedge35 =</span> metadata<span class="sc">$</span>Wedge35,  </span>
<span id="cb13-298"><a href="#cb13-298" tabindex="-1"></a>    <span class="at">object_wedge36 =</span> metadata<span class="sc">$</span>Wedge36,  </span>
<span id="cb13-299"><a href="#cb13-299" tabindex="-1"></a>    <span class="at">object_wedge37 =</span> metadata<span class="sc">$</span>Wedge37,  </span>
<span id="cb13-300"><a href="#cb13-300" tabindex="-1"></a>    <span class="at">object_wedge38 =</span> metadata<span class="sc">$</span>Wedge38,  </span>
<span id="cb13-301"><a href="#cb13-301" tabindex="-1"></a>    <span class="at">object_wedge39 =</span> metadata<span class="sc">$</span>Wedge39,  </span>
<span id="cb13-302"><a href="#cb13-302" tabindex="-1"></a>    <span class="at">object_wedge40 =</span> metadata<span class="sc">$</span>Wedge40,  </span>
<span id="cb13-303"><a href="#cb13-303" tabindex="-1"></a>    <span class="at">object_wedge41 =</span> metadata<span class="sc">$</span>Wedge41,  </span>
<span id="cb13-304"><a href="#cb13-304" tabindex="-1"></a>    <span class="at">object_wedge42 =</span> metadata<span class="sc">$</span>Wedge42,  </span>
<span id="cb13-305"><a href="#cb13-305" tabindex="-1"></a>    <span class="at">object_wedge43 =</span> metadata<span class="sc">$</span>Wedge43,  </span>
<span id="cb13-306"><a href="#cb13-306" tabindex="-1"></a>    <span class="at">object_wedge44 =</span> metadata<span class="sc">$</span>Wedge44,  </span>
<span id="cb13-307"><a href="#cb13-307" tabindex="-1"></a>    <span class="at">object_wedge45 =</span> metadata<span class="sc">$</span>Wedge45,  </span>
<span id="cb13-308"><a href="#cb13-308" tabindex="-1"></a>    <span class="at">object_wedge46 =</span> metadata<span class="sc">$</span>Wedge46,  </span>
<span id="cb13-309"><a href="#cb13-309" tabindex="-1"></a>    <span class="at">object_wedge47 =</span> metadata<span class="sc">$</span>Wedge47,  </span>
<span id="cb13-310"><a href="#cb13-310" tabindex="-1"></a>    <span class="at">object_wedge48 =</span> metadata<span class="sc">$</span>Wedge48</span>
<span id="cb13-311"><a href="#cb13-311" tabindex="-1"></a>    )</span></code></pre></div>
</div>
<div id="generate-ecotaxa-tsv-files" class="section level3">
<h3>Generate EcoTaxa TSV Files</h3>
<p>This section demonstrates how to generate <code>.tsv</code> files
containing metadata for each class subfolder. These files are essential
for uploading data into EcoTaxa. Each <code>.tsv</code> file is written
to its respective class subfolder and includes the relevant metadata for
that class.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Loop .tsv creation for each class</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(<span class="fu">unique</span>(ecotaxa_metadata<span class="sc">$</span>object_annotation_hierarchy))) {</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  </span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="co"># Define path to subfolder</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  subfolder_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">&quot;data/extracted_images&quot;</span>,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>                              <span class="fu">unique</span>(ecotaxa_metadata<span class="sc">$</span>object_annotation_hierarchy)[i])</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  </span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="co"># Filter metadata for each class</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>  ecotaxa_metadata_ix <span class="ot">&lt;-</span> ecotaxa_metadata <span class="sc">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    <span class="fu">filter</span>(object_annotation_hierarchy <span class="sc">==</span> <span class="fu">unique</span>(ecotaxa_metadata<span class="sc">$</span>object_annotation_hierarchy)[i]) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">object_annotation_hierarchy =</span> iRfcb<span class="sc">:::</span><span class="fu">truncate_folder_name</span>(object_annotation_hierarchy))</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  </span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>  <span class="co"># Add data format codes (text[t], float[f] etc.)</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>  ecotaxa_metadata_ix <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>    <span class="fu">ifcb_get_ecotaxa_example</span>()[<span class="dv">1</span>, ] <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.character)),</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>    ecotaxa_metadata_ix <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.character))</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>  )</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  </span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>  <span class="co"># Write one metadata file per class subfolder</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>  <span class="fu">write_tsv</span>(ecotaxa_metadata_ix,</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>            <span class="fu">file.path</span>(</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>              subfolder_path, </span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a>              <span class="fu">paste0</span>(<span class="st">&quot;ecotaxa_&quot;</span>,</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>                     <span class="fu">unique</span>(iRfcb<span class="sc">:::</span><span class="fu">truncate_folder_name</span>(ecotaxa_metadata<span class="sc">$</span>object_annotation_hierarchy))[i],</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>                     <span class="st">&quot;.tsv&quot;</span>)),</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>            <span class="at">na =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="creating-a-zip-archive-for-ecotaxa" class="section level3">
<h3>Creating a Zip Archive for EcoTaxa</h3>
<p>Prepare the PNG directory for publication by creating a zip archive,
ready for upload through the EcoTaxa web interface. Note that the web
interface has a maximum file size limit of 500 MB. To accommodate this
limitation, the zip archive can be split into multiple files by setting
<code>split_zip</code> to <code>TRUE</code> and specifying the
<code>max_size</code> parameter in megabytes.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Create zip-archive</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">ifcb_zip_pngs</span>(<span class="at">png_folder =</span> <span class="st">&quot;data/extracted_images&quot;</span>,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>              <span class="at">zip_filename =</span> <span class="st">&quot;data/zip/iRfcb_ecotaxa.zip&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>              <span class="at">readme_file =</span> <span class="fu">system.file</span>(<span class="st">&quot;exdata/README-template.md&quot;</span>, </span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>                                        <span class="at">package =</span> <span class="st">&quot;iRfcb&quot;</span>), <span class="co"># Template icluded in `iRfcb`</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>              <span class="at">email_address =</span> <span class="st">&quot;tutorial@test.com&quot;</span>,</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>              <span class="at">version =</span> <span class="st">&quot;1.1&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>              <span class="at">include_txt =</span> <span class="cn">TRUE</span>, <span class="co"># To include the metadata text-files in the archive</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>              <span class="at">split_zip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>              <span class="at">max_size =</span> <span class="dv">500</span>,</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>              <span class="at">print_progress =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Creating README file...
## Creating MANIFEST.txt...
## Creating zip archive...
## Zip archive created successfully: /private/var/folders/7t/9x250txj7hz4v60rzqtpn9jm0000gn/T/Rtmp4sQWoM/Rbuildf6a31bdf4361/iRfcb/vignettes/data/zip/iRfcb_ecotaxa.zip</code></pre>
<p>This concludes this tutorial for the <code>iRfcb</code> package. For
more detailed information, refer to the package documentation or the
other <a href="../articles/index.html">tutorials</a>. See how data
pipelines can be constructed using <code>iRfcb</code> in the following
<a href="https://github.com/nodc-sweden/ifcb-data-pipeline">Example
Project</a>. Happy analyzing!</p>
</div>
</div>
<div id="citation" class="section level2">
<h2>Citation</h2>
<pre><code>## To cite package &#39;iRfcb&#39; in publications use:
## 
##   Anders Torstensson (2025). iRfcb: Tools for Managing Imaging
##   FlowCytobot (IFCB) Data. R package version 0.4.3.
##   https://doi.org/10.5281/zenodo.12533225
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {iRfcb: Tools for Managing Imaging FlowCytobot (IFCB) Data},
##     author = {Anders Torstensson},
##     year = {2025},
##     note = {R package version 0.4.3},
##     url = {https://doi.org/10.5281/zenodo.12533225},
##   }</code></pre>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<ul>
<li>Sosik, H. M. and Olson, R. J. (2007) Automated taxonomic
classification of phytoplankton sampled with imaging-in-flow cytometry.
Limnol. Oceanogr: Methods 5, 204â216.</li>
<li>Torstensson, A., Skjevik, A-T., Mohlin, M., Karlberg, M. and
Karlson, B. (2024). SMHI IFCB Plankton Image Reference Library.
SciLifeLab. Dataset. <a href="https://doi.org/10.17044/scilifelab.25883455.v3" class="uri">https://doi.org/10.17044/scilifelab.25883455.v3</a></li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
